'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function () {
  var checks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var callback = arguments[1];

  if (checks.includes('git')) {
    if (!(0, _commandExists.sync)('git')) {
      _logger2.default.warn(gitWarning);
      process.exit(1);
    }
    if (checks.length === 1) {
      callback();
    }
  }

  if (checks.includes('app')) {
    (0, _check_app2.default)();
    if (checks.length === 1) {
      callback();
    }
  }

  if (checks.includes('meteor')) {
    (0, _check_meteor2.default)(callback);
  }

  if (checks.includes('platform')) {
    if (!Config.get('global', 'launchdock.username')) {
      _logger2.default.info(platformWarning);
      process.exit(1);
    }
    callback();
  }
};

var _commandExists = require('command-exists');

var _check_app = require('./check_app');

var _check_app2 = _interopRequireDefault(_check_app);

var _check_meteor = require('./check_meteor');

var _check_meteor2 = _interopRequireDefault(_check_meteor);

var _config = require('./config');

var Config = _interopRequireWildcard(_config);

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var gitWarning = '\nOops! It looks like you don\'t have Git installed yet!\n\nPlease see the Reaction requirements docs first,\nthen try running this command again once you have\ninstalled all of the requirements for your operating system.\n\nMore info...\nhttp://getrxn.io/2installRC\n';

var platformWarning = '\nThis command requires being logged into the managed platform.\n\nIf you have an account, please log in and try this command again.\nIf you you don\'t have an account, please see the link below to learn more.\n\n' + _logger2.default.magenta('http://getrxn.io/reaction-platform') + '\n';