'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (callback) {
  var blue = _logger2.default.blue;


  if (!(0, _commandExists.sync)('meteor')) {
    _logger2.default.warn('\nOops! You don\'t have Meteor installed yet! \n');

    if (process.platform === 'win32') {
      _logger2.default.warn('\nPlease see Meteor install instructions for Windows at: https://www.meteor.com/install\n');
      process.exit(1);
    }

    _inquirer2.default.prompt([{
      type: 'confirm',
      name: 'meteor',
      message: 'Would you like to install it now?',
      default: true
    }]).then(function (answers) {
      if (answers.meteor) {
        _logger2.default.info('Installing Meteor...\n');
        try {
          (0, _child_process.execSync)('curl https://install.meteor.com/ | sh', { stdio: 'inherit' });
        } catch (err) {
          _logger2.default.error('\nError: Meteor install failed');
          process.exit(1);
        }
        _logger2.default.success('Meteor successfully installed!');
        callback();
      } else {
        _logger2.default.info('\nOk, try running this command again once you have Meteor installed.');
        _logger2.default.info('Learn more at: ' + blue.bold.underline('http://www.meteor.com') + '\n');
        process.exit(1);
      }
    });
  } else {
    callback();
  }
};

var _child_process = require('child_process');

var _inquirer = require('inquirer');

var _inquirer2 = _interopRequireDefault(_inquirer);

var _commandExists = require('command-exists');

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }